<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>State Controller ESP32 | OXRS Docs</title><meta name="description" content="The Open eXtensible Rack System">
    <link rel="modulepreload" href="/assets/app.f95394c5.js"><link rel="modulepreload" href="/assets/state-controller-esp32.html.571e8c33.js"><link rel="modulepreload" href="/assets/state-controller-esp32.html.2b6581fc.js"><link rel="prefetch" href="/assets/index.html.c0ad87a3.js"><link rel="prefetch" href="/assets/acronyms.html.85b17252.js"><link rel="prefetch" href="/assets/makers.html.2b595321.js"><link rel="prefetch" href="/assets/skus.html.a40b3b1a.js"><link rel="prefetch" href="/assets/asset-generator.html.292eafff.js"><link rel="prefetch" href="/assets/index.html.0d8df3dc.js"><link rel="prefetch" href="/assets/128x32-OLED-display.html.6624c2ab.js"><link rel="prefetch" href="/assets/IPS-display.html.b150d1eb.js"><link rel="prefetch" href="/assets/index.html.8b015920.js"><link rel="prefetch" href="/assets/index.html.57813e26.js"><link rel="prefetch" href="/assets/template.html.dafd80f2.js"><link rel="prefetch" href="/assets/index.html.8f87e0ed.js"><link rel="prefetch" href="/assets/template.html.42a20399.js"><link rel="prefetch" href="/assets/index.html.f3e7afd9.js"><link rel="prefetch" href="/assets/ac-smart-switch.html.770e2309.js"><link rel="prefetch" href="/assets/index.html.e213615e.js"><link rel="prefetch" href="/assets/wt32-sc01.html.00d26254.js"><link rel="prefetch" href="/assets/index.html.1695a2bd.js"><link rel="prefetch" href="/assets/index.html.7fc08718.js"><link rel="prefetch" href="/assets/digital-io-esp.html.c2a1406b.js"><link rel="prefetch" href="/assets/led-controller-esp32.html.540ae6bd.js"><link rel="prefetch" href="/assets/security-monitor-esp32.html.6eb5f56c.js"><link rel="prefetch" href="/assets/smoke-detector-esp32.html.698ee4b8.js"><link rel="prefetch" href="/assets/state-io-esp32.html.45cfb0f2.js"><link rel="prefetch" href="/assets/state-monitor-esp32.html.5a0fb04e.js"><link rel="prefetch" href="/assets/touch-panel-esp32.html.0acb9bce.js"><link rel="prefetch" href="/assets/index.html.0585389a.js"><link rel="prefetch" href="/assets/index.html.d2444dcf.js"><link rel="prefetch" href="/assets/esp-sensor-library.html.0ef63413.js"><link rel="prefetch" href="/assets/esp32-api-library.html.4afdc249.js"><link rel="prefetch" href="/assets/esp32-io-handler-library.html.a37143b0.js"><link rel="prefetch" href="/assets/esp32-lcd-library.html.9a775cb0.js"><link rel="prefetch" href="/assets/esp32-mqtt-library.html.9082a4d4.js"><link rel="prefetch" href="/assets/index.html.70ec63c3.js"><link rel="prefetch" href="/assets/backup-restore.html.888f1122.js"><link rel="prefetch" href="/assets/home_assistant.html.6c1526ac.js"><link rel="prefetch" href="/assets/node_red.html.626d5285.js"><link rel="prefetch" href="/assets/index.html.769252b2.js"><link rel="prefetch" href="/assets/IDC.html.7c963ae1.js"><link rel="prefetch" href="/assets/IO-ethernet.html.ab6c94cc.js"><link rel="prefetch" href="/assets/index.html.2ff5be75.js"><link rel="prefetch" href="/assets/versioning.html.59c0e5b3.js"><link rel="prefetch" href="/assets/index.html.97c170a6.js"><link rel="prefetch" href="/assets/index.html.e25d62d1.js"><link rel="prefetch" href="/assets/markdown.html.7dcba304.js"><link rel="prefetch" href="/assets/index.html.488b2264.js"><link rel="prefetch" href="/assets/rack-mount.html.2914fc32.js"><link rel="prefetch" href="/assets/oxrs-black.html.ecba864f.js"><link rel="prefetch" href="/assets/rack-fan-controller.html.d5a28230.js"><link rel="prefetch" href="/assets/rack32.html.e49e1b44.js"><link rel="prefetch" href="/assets/room8266.html.abe21645.js"><link rel="prefetch" href="/assets/tower-controller.html.3b9d260d.js"><link rel="prefetch" href="/assets/I2CRJ45.html.0ec5255e.js"><link rel="prefetch" href="/assets/Modular-I2CRJ45.html.85dbda09.js"><link rel="prefetch" href="/assets/Modular-Security-I2CRJ45.html.0aa3ceb1.js"><link rel="prefetch" href="/assets/hardware-template.html.a3de1a7e.js"><link rel="prefetch" href="/assets/hardware-template.html.052809d8.js"><link rel="prefetch" href="/assets/pwm-controllers.html.ef19550d.js"><link rel="prefetch" href="/assets/rack32-knx-shield.html.2c4bdee1.js"><link rel="prefetch" href="/assets/index.html.75f8c3c0.js"><link rel="prefetch" href="/assets/firmware-template.html.79b3c610.js"><link rel="prefetch" href="/assets/hardware-template.html.c2f922db.js"><link rel="prefetch" href="/assets/404.html.7d858b3d.js"><link rel="prefetch" href="/assets/index.html.315acd76.js"><link rel="prefetch" href="/assets/acronyms.html.b98710e3.js"><link rel="prefetch" href="/assets/makers.html.1aa0a8fa.js"><link rel="prefetch" href="/assets/skus.html.7998fda3.js"><link rel="prefetch" href="/assets/asset-generator.html.d226fcd7.js"><link rel="prefetch" href="/assets/index.html.b4a6f1f3.js"><link rel="prefetch" href="/assets/128x32-OLED-display.html.28a4bdae.js"><link rel="prefetch" href="/assets/IPS-display.html.8340b35d.js"><link rel="prefetch" href="/assets/index.html.25bae91a.js"><link rel="prefetch" href="/assets/index.html.d6424876.js"><link rel="prefetch" href="/assets/template.html.889f39eb.js"><link rel="prefetch" href="/assets/index.html.0fe217f7.js"><link rel="prefetch" href="/assets/template.html.ea0a699d.js"><link rel="prefetch" href="/assets/index.html.75e3df58.js"><link rel="prefetch" href="/assets/ac-smart-switch.html.ad1b3f97.js"><link rel="prefetch" href="/assets/index.html.4d299976.js"><link rel="prefetch" href="/assets/wt32-sc01.html.baf8cbc2.js"><link rel="prefetch" href="/assets/index.html.6b6d18a9.js"><link rel="prefetch" href="/assets/index.html.59afa53a.js"><link rel="prefetch" href="/assets/digital-io-esp.html.68e56509.js"><link rel="prefetch" href="/assets/led-controller-esp32.html.b2cb371b.js"><link rel="prefetch" href="/assets/security-monitor-esp32.html.143b253f.js"><link rel="prefetch" href="/assets/smoke-detector-esp32.html.20df28f7.js"><link rel="prefetch" href="/assets/state-io-esp32.html.43ffcd28.js"><link rel="prefetch" href="/assets/state-monitor-esp32.html.54bc0658.js"><link rel="prefetch" href="/assets/touch-panel-esp32.html.4ce92ffe.js"><link rel="prefetch" href="/assets/index.html.b961859e.js"><link rel="prefetch" href="/assets/index.html.ef2fb9b6.js"><link rel="prefetch" href="/assets/esp-sensor-library.html.84a129b9.js"><link rel="prefetch" href="/assets/esp32-api-library.html.269a730b.js"><link rel="prefetch" href="/assets/esp32-io-handler-library.html.1278acd1.js"><link rel="prefetch" href="/assets/esp32-lcd-library.html.d70871bd.js"><link rel="prefetch" href="/assets/esp32-mqtt-library.html.4b119def.js"><link rel="prefetch" href="/assets/index.html.14a60971.js"><link rel="prefetch" href="/assets/backup-restore.html.7668619d.js"><link rel="prefetch" href="/assets/home_assistant.html.09660d19.js"><link rel="prefetch" href="/assets/node_red.html.c2b078dc.js"><link rel="prefetch" href="/assets/index.html.fd712b2f.js"><link rel="prefetch" href="/assets/IDC.html.93bfd54e.js"><link rel="prefetch" href="/assets/IO-ethernet.html.6d774f3c.js"><link rel="prefetch" href="/assets/index.html.36193cbd.js"><link rel="prefetch" href="/assets/versioning.html.a346763f.js"><link rel="prefetch" href="/assets/index.html.89b14fa8.js"><link rel="prefetch" href="/assets/index.html.f4a0d41d.js"><link rel="prefetch" href="/assets/markdown.html.de272c81.js"><link rel="prefetch" href="/assets/index.html.1413ab0a.js"><link rel="prefetch" href="/assets/rack-mount.html.66f793f1.js"><link rel="prefetch" href="/assets/oxrs-black.html.18cd8f74.js"><link rel="prefetch" href="/assets/rack-fan-controller.html.45c66a1a.js"><link rel="prefetch" href="/assets/rack32.html.0b4cfa7e.js"><link rel="prefetch" href="/assets/room8266.html.6b64a260.js"><link rel="prefetch" href="/assets/tower-controller.html.547e3193.js"><link rel="prefetch" href="/assets/I2CRJ45.html.096a1cdd.js"><link rel="prefetch" href="/assets/Modular-I2CRJ45.html.46c06179.js"><link rel="prefetch" href="/assets/Modular-Security-I2CRJ45.html.6dbc221a.js"><link rel="prefetch" href="/assets/hardware-template.html.5d1808ff.js"><link rel="prefetch" href="/assets/hardware-template.html.86eb6ef6.js"><link rel="prefetch" href="/assets/pwm-controllers.html.2fee1ee7.js"><link rel="prefetch" href="/assets/rack32-knx-shield.html.a4510b0a.js"><link rel="prefetch" href="/assets/index.html.fadc846a.js"><link rel="prefetch" href="/assets/firmware-template.html.533b3f65.js"><link rel="prefetch" href="/assets/hardware-template.html.0685215d.js"><link rel="prefetch" href="/assets/404.html.ccf28cb9.js"><link rel="prefetch" href="/assets/404.6d94a7db.js"><link rel="prefetch" href="/assets/Layout.9e0edc14.js"><link rel="prefetch" href="/assets/IconGenerator.145f7b36.js"><link rel="prefetch" href="/assets/IndexCalculator.9c49a980.js">
    <link rel="stylesheet" href="/assets/style.fe1f59ee.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/hero.png" alt="OXRS Docs"><span class="site-name can-hide">OXRS Docs</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Docs"><span class="title">Docs</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Docs"><span class="title">Docs</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/hardware/" class="" aria-label="Hardware"><!--[--><!--]--> Hardware <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/firmware/" class="router-link-active" aria-label="Firmware"><!--[--><!--]--> Firmware <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/libraries/" class="" aria-label="Libraries"><!--[--><!--]--> Libraries <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/cases/" class="" aria-label="Cases"><!--[--><!--]--> Cases <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Add-ons"><span class="title">Add-ons</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Add-ons"><span class="title">Add-ons</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/add-ons/accessibility/" class="" aria-label="Accessibility"><!--[--><!--]--> Accessibility <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/add-ons/displays/" class="" aria-label="Displays"><!--[--><!--]--> Displays <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/add-ons/touch-displays/" class="" aria-label="Touch Displays"><!--[--><!--]--> Touch Displays <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/add-ons/switches/" class="" aria-label="Switches"><!--[--><!--]--> Switches <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Guides"><span class="title">Guides</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Guides"><span class="title">Guides</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guides/getting-started/" class="" aria-label="Getting Started"><!--[--><!--]--> Getting Started <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guides/advanced/" class="" aria-label="Advanced"><!--[--><!--]--> Advanced <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guides/standards/" class="" aria-label="Standards"><!--[--><!--]--> Standards <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guides/writing-docs/" class="" aria-label="Writing Docs"><!--[--><!--]--> Writing Docs <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Glossary"><span class="title">Glossary</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Glossary"><span class="title">Glossary</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/glossary/skus/" class="" aria-label="SKU&#39;s"><!--[--><!--]--> SKU&#39;s <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/glossary/makers/" class="" aria-label="Makers"><!--[--><!--]--> Makers <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/glossary/acronyms/" class="" aria-label="Acronyms"><!--[--><!--]--> Acronyms <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/OXRS-IO/" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://discord.gg/6pZvmVS5ET" rel="noopener noreferrer" target="_blank" aria-label="Discord"><!--[--><!--]--> Discord <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Docs"><span class="title">Docs</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Docs"><span class="title">Docs</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/hardware/" class="" aria-label="Hardware"><!--[--><!--]--> Hardware <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/firmware/" class="router-link-active" aria-label="Firmware"><!--[--><!--]--> Firmware <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/libraries/" class="" aria-label="Libraries"><!--[--><!--]--> Libraries <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/cases/" class="" aria-label="Cases"><!--[--><!--]--> Cases <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Add-ons"><span class="title">Add-ons</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Add-ons"><span class="title">Add-ons</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/add-ons/accessibility/" class="" aria-label="Accessibility"><!--[--><!--]--> Accessibility <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/add-ons/displays/" class="" aria-label="Displays"><!--[--><!--]--> Displays <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/add-ons/touch-displays/" class="" aria-label="Touch Displays"><!--[--><!--]--> Touch Displays <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/add-ons/switches/" class="" aria-label="Switches"><!--[--><!--]--> Switches <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Guides"><span class="title">Guides</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Guides"><span class="title">Guides</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guides/getting-started/" class="" aria-label="Getting Started"><!--[--><!--]--> Getting Started <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guides/advanced/" class="" aria-label="Advanced"><!--[--><!--]--> Advanced <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guides/standards/" class="" aria-label="Standards"><!--[--><!--]--> Standards <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guides/writing-docs/" class="" aria-label="Writing Docs"><!--[--><!--]--> Writing Docs <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Glossary"><span class="title">Glossary</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Glossary"><span class="title">Glossary</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/glossary/skus/" class="" aria-label="SKU&#39;s"><!--[--><!--]--> SKU&#39;s <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/glossary/makers/" class="" aria-label="Makers"><!--[--><!--]--> Makers <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/glossary/acronyms/" class="" aria-label="Acronyms"><!--[--><!--]--> Acronyms <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/OXRS-IO/" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://discord.gg/6pZvmVS5ET" rel="noopener noreferrer" target="_blank" aria-label="Discord"><!--[--><!--]--> Discord <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/docs/hardware/" class="sidebar-item sidebar-heading" aria-label="Hardware"><!--[--><!--]--> Hardware <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item">Controllers <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/hardware/controllers/rack32.html" class="sidebar-item" aria-label="Rack32"><!--[--><!--]--> Rack32 <!--[--><!--]--></a><!----></li><li><a href="/docs/hardware/controllers/room8266.html" class="sidebar-item" aria-label="Room8266"><!--[--><!--]--> Room8266 <!--[--><!--]--></a><!----></li><li><a href="/docs/hardware/controllers/oxrs-black.html" class="sidebar-item" aria-label="OXRS Black"><!--[--><!--]--> OXRS Black <!--[--><!--]--></a><!----></li><li><a href="/docs/hardware/controllers/rack-fan-controller.html" class="sidebar-item" aria-label="Modular Rack Fan Controller"><!--[--><!--]--> Modular Rack Fan Controller <!--[--><!--]--></a><!----></li><li><a href="/docs/hardware/controllers/tower-controller.html" class="sidebar-item" aria-label="Tower Controller"><!--[--><!--]--> Tower Controller <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">Input Devices <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/hardware/input-devices/I2CRJ45.html" class="sidebar-item" aria-label="I2CRJ45"><!--[--><!--]--> I2CRJ45 <!--[--><!--]--></a><!----></li><li><a href="/docs/hardware/input-devices/Modular-I2CRJ45.html" class="sidebar-item" aria-label="Modular-I2CRJ45"><!--[--><!--]--> Modular-I2CRJ45 <!--[--><!--]--></a><!----></li><li><a href="/docs/hardware/input-devices/Modular-Security-I2CRJ45.html" class="sidebar-item" aria-label="Modular-Security-I2CRJ45"><!--[--><!--]--> Modular-Security-I2CRJ45 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">Output Devices <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/hardware/output-devices/pwm-controllers.html" class="sidebar-item" aria-label="PWM Controllers"><!--[--><!--]--> PWM Controllers <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">Input &amp; Output Devices <!----></p><!----></li><li><p tabindex="0" class="sidebar-item">Shields <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/hardware/shields/rack32-knx-shield.html" class="sidebar-item" aria-label="Rack32 KNX Shield"><!--[--><!--]--> Rack32 KNX Shield <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/docs/firmware/" class="router-link-active sidebar-item sidebar-heading active" aria-label="Firmware"><!--[--><!--]--> Firmware <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item active">ESP32 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/firmware/state-monitor-esp32.html" class="sidebar-item" aria-label="State Monitor ESP32"><!--[--><!--]--> State Monitor ESP32 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/firmware/state-controller-esp32.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="State Controller ESP32"><!--[--><!--]--> State Controller ESP32 <!--[--><!--]--></a><!----></li><li><a href="/docs/firmware/state-io-esp32.html" class="sidebar-item" aria-label="State IO ESP32"><!--[--><!--]--> State IO ESP32 <!--[--><!--]--></a><!----></li><li><a href="/docs/firmware/digital-io-esp.html" class="sidebar-item" aria-label="Digital IO ESP32/ESP8266"><!--[--><!--]--> Digital IO ESP32/ESP8266 <!--[--><!--]--></a><!----></li><li><a href="/docs/firmware/security-monitor-esp32.html" class="sidebar-item" aria-label="Security Monitor ESP32"><!--[--><!--]--> Security Monitor ESP32 <!--[--><!--]--></a><!----></li><li><a href="/docs/firmware/smoke-detector-esp32.html" class="sidebar-item" aria-label="Smoke Detector ESP32"><!--[--><!--]--> Smoke Detector ESP32 <!--[--><!--]--></a><!----></li><li><a href="/docs/firmware/touch-panel-esp32.html" class="sidebar-item" aria-label="Touch Panel ESP32"><!--[--><!--]--> Touch Panel ESP32 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/docs/libraries/" class="sidebar-item sidebar-heading" aria-label="Libraries"><!--[--><!--]--> Libraries <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item">ESP32 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/libraries/esp32-mqtt-library.html" class="sidebar-item" aria-label="ESP32 MQTT library"><!--[--><!--]--> ESP32 MQTT library <!--[--><!--]--></a><!----></li><li><a href="/docs/libraries/esp32-api-library.html" class="sidebar-item" aria-label="ESP32 API library"><!--[--><!--]--> ESP32 API library <!--[--><!--]--></a><!----></li><li><a href="/docs/libraries/esp32-lcd-library.html" class="sidebar-item" aria-label="ESP32 LCD library"><!--[--><!--]--> ESP32 LCD library <!--[--><!--]--></a><!----></li><li><a href="/docs/libraries/esp32-io-handler-library.html" class="sidebar-item" aria-label="ESP32 I/O handler library"><!--[--><!--]--> ESP32 I/O handler library <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">ESP <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/libraries/esp-sensor-library.html" class="sidebar-item" aria-label="ESP SENSOR library"><!--[--><!--]--> ESP SENSOR library <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/docs/cases/" class="sidebar-item sidebar-heading" aria-label="Cases"><!--[--><!--]--> Cases <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item">Rack Mount <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/cases/rack-mount/rack-mount.html" class="sidebar-item" aria-label="Rack Mount Cases"><!--[--><!--]--> Rack Mount Cases <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">3D Printed <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/cases/3D-printed/" class="sidebar-item" aria-label="3D Printed Cases"><!--[--><!--]--> 3D Printed Cases <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="state-controller-esp32" tabindex="-1"><a class="header-anchor" href="#state-controller-esp32" aria-hidden="true">#</a> State Controller ESP32</h1><p class="maker">by <b>Ben Jones</b></p><blockquote><p>SKU: OXRS-SHA-STATECONTROLLER-ESP32-FW</p></blockquote><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2><p>A binary state controller for DIY home automation projects.</p><p>Listens for MQTT messages and send on/off binary output signals using MCP23017 I2C I/O buffers.</p><p>Typically the output signals would be used to drive relay coils in order to switch larger voltages - e.g. light circuits.</p><hr><h3 id="how-does-it-work" tabindex="-1"><a class="header-anchor" href="#how-does-it-work" aria-hidden="true">#</a> How does it work?</h3><p>Outputs can be switched by publishing an MQTT message to the configured MQTT broker.</p><p>Each output can be configured as a <code>relay</code>, for simple <code>on</code>/<code>off</code> control. A <code>motor</code>, again with <code>on</code>/<code>off</code> control but longer interlock delays if interlocking is configured. Or a <code>timer</code>, for <code>on</code> and then timed <code>off</code> control.</p><p>The firmware is designed to run on hardware using MCP23017 I/O buffer chips via I2C, e.g. the <a href="https://bmdesigns.com.au/shop/relay16-16-channel-relay-driver/" target="_blank" rel="noopener noreferrer">16 Channel Relay Driver<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><p>A single I2C bus can only support up to a maximum of 8x MCP23017 chips (addresses <code>0x20-0x27</code>). Therefore the maximum number of supported outputs is 128 (i.e. 8x MCP23017s * 16x I/O pins).</p><h3 id="interlocking" tabindex="-1"><a class="header-anchor" href="#interlocking" aria-hidden="true">#</a> Interlocking</h3><p>Interlocking two outputs allows them to control equipment such as roller blinds, garage doors, louvre roofing etc.</p><p>However if you are planning to control a motor of any sort then it is important that the two outputs are configured as type <code>motor</code> and that both are interlocked with each other. This is to ensure that both outputs will not be commanded to operate at the same time and adds a 2 second delay between any changes of output.</p><p>Example payload to configure outputs 4 &amp; 5 to control a set of roller blinds;</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;motor&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;interlockIndex&quot;</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;motor&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;interlockIndex&quot;</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The operation of the interlocked outputs should be verified before connecting to any external equipment. External interlocking equipment may be required for some equipment. Most importantly, the manufacturers wiring and installation guides must be adhered to.</p><h3 id="timers" tabindex="-1"><a class="header-anchor" href="#timers" aria-hidden="true">#</a> Timers</h3><p>Timers allow an output to automatically turn <code>off</code> a set number of seconds after being turned <code>on</code> (configurable via <code>timerSeconds</code>, which defaults to 60 seconds).</p><p>If another <code>on</code> command is sent while the timer is running, it will reset to zero and begin counting down again. If an <code>off</code> command is sent the timer will be cancelled and the output turned <code>off</code> immediately.</p><h2 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration" aria-hidden="true">#</a> Configuration</h2><p>The firmware can be configured by publishing an MQTT message to this topic;</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[PREFIX/]conf/CLIENTID[/SUFFIX]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>where:</p><ul><li><code>PREFIX</code>: Optional topic prefix if required</li><li><code>CLIENTID</code>: Client id of device, defaults to <code>&lt;MACADDRESS&gt;</code></li><li><code>SUFFIX</code>: Optional topic suffix if required</li></ul><p>The message payload should be JSON and it&#39;s format is defined in a JSON schema document included in the adoption payload published here;</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[PREFIX/]stat/CLIENTID[/SUFFIX]/adopt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>See the <code>config</code> value in the <code>/adopt</code> payload.</p><h3 id="mcp-config" tabindex="-1"><a class="header-anchor" href="#mcp-config" aria-hidden="true">#</a> MCP Config</h3><p>This firmware is compatible with I/O boards with MCPs driving 8 or 16 output relays (see <strong>Supported Hardware</strong> links below). If you are using a board which is only driving 8 output relays you need to tell the firmware to ignore pins 9-16 on each MCP.</p><table><thead><tr><th>Key</th><th>Mandatory</th><th>Value</th></tr></thead><tbody><tr><td><code>outputsPerMcp</code></td><td>Optional</td><td>Number of outputs connected to each MCP (either 8 or 16, defaults to 16)</td></tr></tbody></table><p>Your device <strong>MUST</strong> be restarted after any changes to this configuration, before it will take effect.</p><h4 id="examples" tabindex="-1"><a class="header-anchor" href="#examples" aria-hidden="true">#</a> Examples</h4><p>To configure for use with <a href="https://www.superhouse.tv/product/8-channel-relay-driver-shield/" target="_blank" rel="noopener noreferrer">8 Channel Relay Driver Shield<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>;</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span> 
  <span class="token property">&quot;outputsPerMcp&quot;</span><span class="token operator">:</span> <span class="token number">8</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>This config should be set using the REST API and <strong>NOT</strong> a retained MQTT message. This config is used when initialising the device and is needed by the firmware before a connection to the MQTT broker is made. Setting this via the REST API will ensure it is persisted to SPIFFS and loaded early enough in the boot sequence.</p></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>You can set this config via the REST API using <code>curl</code> (substitute your device IP address);</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>curl -X POST http://&lt;DEVICE_IP&gt;/config -H &#39;Content-Type: application/json&#39; -d &#39;{&quot;outputsPerMcp&quot;:8}&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><h3 id="default-output-type" tabindex="-1"><a class="header-anchor" href="#default-output-type" aria-hidden="true">#</a> Default Output Type</h3><p>By default all outputs are initialised as type <code>relay</code>. Individual outputs can then be configured as required (see below). However it is also possible to change this default. For example, if you are intending to control roller blinds throughout your home, instead of setting individual config for each output, you can simply set the <code>defaultOutputType</code> to <code>motor</code> and be done with it.</p><table><thead><tr><th>Key</th><th>Mandatory</th><th>Value</th></tr></thead><tbody><tr><td><code>defaultOutputType</code></td><td>Optional</td><td>Either <code>motor</code>, <code>relay</code>, or <code>timer</code></td></tr></tbody></table><h3 id="examples-1" tabindex="-1"><a class="header-anchor" href="#examples-1" aria-hidden="true">#</a> Examples</h3><p>To configure the default output type to be <code>motor</code>;</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span> 
  <span class="token property">&quot;defaultOutputType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;motor&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>You can still override the default output type with specific configuration for individual outputs, see below.</p></div><h3 id="output-config" tabindex="-1"><a class="header-anchor" href="#output-config" aria-hidden="true">#</a> Output Config</h3><p>Each OUTPUT can be configured via the following properties;</p><table><thead><tr><th>Key</th><th>Mandatory</th><th>Value</th></tr></thead><tbody><tr><td><code>index</code></td><td>Mandatory</td><td>Index of the output to configure</td></tr><tr><td><code>type</code></td><td>Optional</td><td>Either <code>motor</code>, <code>relay</code>, or <code>timer</code></td></tr><tr><td><code>interlockIndex</code></td><td>Optional</td><td>Index to interlock with (lock the opposite for interlocking both ways or self-lock to disable interlocking)</td></tr><tr><td><code>timerSeconds</code></td><td>Optional</td><td>Number of seconds an output stays <code>on</code> when type set to <code>timer</code> (defaults to 60 seconds)</td></tr></tbody></table><p>The only difference between <code>motor</code> and <code>relay</code> outputs is the interlock delay (if an interlock is configured).</p><table><thead><tr><th>Output Type</th><th>Interlock delay</th></tr></thead><tbody><tr><td><code>motor</code></td><td>2000ms</td></tr><tr><td><code>relay</code></td><td>500ms</td></tr></tbody></table><h4 id="examples-2" tabindex="-1"><a class="header-anchor" href="#examples-2" aria-hidden="true">#</a> Examples</h4><p>To configure output 4 to be a 30 second timer and outputs 6 &amp; 7 to drive a motor and be interlocked;</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span> 
  <span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;timer&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;timerSeconds&quot;</span><span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;motor&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;interlockIndex&quot;</span><span class="token operator">:</span> <span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;motor&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;interlockIndex&quot;</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>A retained message will ensure the device auto-configures on startup.</p></div><h2 id="commands" tabindex="-1"><a class="header-anchor" href="#commands" aria-hidden="true">#</a> Commands</h2><p>Each OUTPUT can be controlled by publishing an MQTT message to the topic;</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[PREFIX/]cmnd/CLIENTID[/SUFFIX]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>where;</p><ul><li><code>PREFIX</code>: Optional topic prefix if required</li><li><code>CLIENTID</code>: Client id of device, defaults to <code>&lt;MACADDRESS&gt;</code></li><li><code>SUFFIX</code>: Optional topic suffix if required</li></ul><p>The message payload should be JSON and it&#39;s format is defined in a JSON schema document included in the adoption payload published here;</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[PREFIX/]stat/CLIENTID[/SUFFIX]/adopt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>See the <code>command</code> value in the <code>/adopt</code> payload.</p><table><thead><tr><th>Key</th><th>Mandatory</th><th>Value</th></tr></thead><tbody><tr><td><code>index</code></td><td>Mandatory</td><td>Index of the output to switched</td></tr><tr><td><code>command</code></td><td>Mandatory</td><td>Either <code>on</code>, <code>off</code>, or <code>query</code></td></tr></tbody></table><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>The <code>query</code> command will cause an event to be published, with the current state of that output.</p></div><h3 id="examples-3" tabindex="-1"><a class="header-anchor" href="#examples-3" aria-hidden="true">#</a> Examples</h3><p>To turn on output 4 and query the state of output 7;</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span> 
  <span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;on&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;query&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="events" tabindex="-1"><a class="header-anchor" href="#events" aria-hidden="true">#</a> Events</h2><p>An output STATE CHANGE is reported to a topic of the form;</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[PREFIX/]stat/CLIENTID[/SUFFIX]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>where;</p><ul><li><code>PREFIX</code>: Optional topic prefix if required</li><li><code>CLIENTID</code>: Client id of device, defaults to <code>&lt;MACADDRESS&gt;</code></li><li><code>SUFFIX</code>: Optional topic suffix if required</li></ul><p>The message payload is JSON and contains:</p><table><thead><tr><th>Key</th><th>Value</th></tr></thead><tbody><tr><td><code>index</code></td><td>Index of this event (1-128)</td></tr><tr><td><code>type</code></td><td>Event type (see below)</td></tr><tr><td><code>event</code></td><td>Event (see below)</td></tr></tbody></table><table><thead><tr><th>Event Type</th><th>Event</th></tr></thead><tbody><tr><td><code>motor</code></td><td><code>on</code> or <code>off</code></td></tr><tr><td><code>relay</code></td><td><code>on</code> or <code>off</code></td></tr><tr><td><code>timer</code></td><td><code>on</code> or <code>off</code></td></tr></tbody></table><h3 id="examples-4" tabindex="-1"><a class="header-anchor" href="#examples-4" aria-hidden="true">#</a> Examples</h3><p>A relay turning on for output 6;</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> 
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;relay&quot;</span><span class="token punctuation">,</span> 
  <span class="token property">&quot;event&quot;</span><span class="token operator">:</span> <span class="token string">&quot;on&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A timer turning off for output 12;</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span> 
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;timer&quot;</span><span class="token punctuation">,</span> 
  <span class="token property">&quot;event&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="downloads" tabindex="-1"><a class="header-anchor" href="#downloads" aria-hidden="true">#</a> Downloads</h2><p>Download the latest version of the firmware on <a href="https://github.com/SuperHouse/OXRS-SHA-StateController-ESP32-FW" target="_blank" rel="noopener noreferrer">Github<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h2 id="supported-hardware" tabindex="-1"><a class="header-anchor" href="#supported-hardware" aria-hidden="true">#</a> Supported Hardware</h2><p>This firmware is compatible with the boards;</p><ul><li><a href="https://www.superhouse.tv/product/8-channel-relay-driver-shield/" target="_blank" rel="noopener noreferrer">8 Channel Relay Driver Shield<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> by SuperHouse</li><li><a href="https://bmdesigns.com.au/shop/relay128-128-channel-relay-driver/" target="_blank" rel="noopener noreferrer">128 Channel Relay Driver<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> by Bedrock Media Designs</li><li><a href="https://bmdesigns.com.au/shop/relay16-16-channel-relay-driver/" target="_blank" rel="noopener noreferrer">16 Channel Relay Driver<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> by Bedrock Media Designs</li></ul><p>And is designed to run on the <a href="/docs/hardware/controllers/rack32.html" class="">RACK32</a> as part of the <a href="https://oxrs.io" target="_blank" rel="noopener noreferrer">OXRS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> eco-system.</p><h4 id="credits" tabindex="-1"><a class="header-anchor" href="#credits" aria-hidden="true">#</a> Credits</h4><ul><li>Jonathan Oxer <a href="mailto:jon@oxer.com.au">jon@oxer.com.au</a></li><li>Ben Jones <a href="https://github.com/sumnerboy12" target="_blank" rel="noopener noreferrer">https://github.com/sumnerboy12<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Moin <a href="https://github.com/moinmoin-sh" target="_blank" rel="noopener noreferrer">https://github.com/moinmoin-sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h4 id="license" tabindex="-1"><a class="header-anchor" href="#license" aria-hidden="true">#</a> License</h4><p>Copyright 2020-present SuperHouse Automation Pty Ltd <a href="www.superhouse.tv">www.superhouse.tv</a></p><p>The software portion of this project is licensed under the Simplified BSD License. The &quot;licence&quot; folder within this project contains a copy of this license in plain text format.</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/OXRS-IO/OXRS-IO-WEBSITE/edit/main/docs/docs/firmware/state-controller-esp32.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: ben.jones12@gmail.com">ben</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: ben.jones12@gmail.com">Ben Jones</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: sumnerboy12@users.noreply.github.com">Ben Jones</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: aaron_knox@me.com">Aaron Knox</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: support@bettercorp.co.za">Mitchell R</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 70245481+austinscreations@users.noreply.github.com">austinscreations</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/docs/firmware/state-monitor-esp32.html" class="" aria-label="State Monitor ESP32"><!--[--><!--]--> State Monitor ESP32 <!--[--><!--]--></a></span><span class="next"><a href="/docs/firmware/state-io-esp32.html" class="" aria-label="State IO ESP32"><!--[--><!--]--> State IO ESP32 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.f95394c5.js" defer></script>
  </body>
</html>
