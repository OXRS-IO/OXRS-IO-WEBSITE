<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>ESP32 API library | OXRS Docs</title><meta name="description" content="The Open eXtensible Rack System">
    <link rel="modulepreload" href="/assets/app.f95394c5.js"><link rel="modulepreload" href="/assets/esp32-api-library.html.269a730b.js"><link rel="modulepreload" href="/assets/esp32-api-library.html.4afdc249.js"><link rel="prefetch" href="/assets/index.html.c0ad87a3.js"><link rel="prefetch" href="/assets/acronyms.html.85b17252.js"><link rel="prefetch" href="/assets/makers.html.2b595321.js"><link rel="prefetch" href="/assets/skus.html.a40b3b1a.js"><link rel="prefetch" href="/assets/asset-generator.html.292eafff.js"><link rel="prefetch" href="/assets/index.html.0d8df3dc.js"><link rel="prefetch" href="/assets/128x32-OLED-display.html.6624c2ab.js"><link rel="prefetch" href="/assets/IPS-display.html.b150d1eb.js"><link rel="prefetch" href="/assets/index.html.8b015920.js"><link rel="prefetch" href="/assets/index.html.57813e26.js"><link rel="prefetch" href="/assets/template.html.dafd80f2.js"><link rel="prefetch" href="/assets/index.html.8f87e0ed.js"><link rel="prefetch" href="/assets/template.html.42a20399.js"><link rel="prefetch" href="/assets/index.html.f3e7afd9.js"><link rel="prefetch" href="/assets/ac-smart-switch.html.770e2309.js"><link rel="prefetch" href="/assets/index.html.e213615e.js"><link rel="prefetch" href="/assets/wt32-sc01.html.00d26254.js"><link rel="prefetch" href="/assets/index.html.1695a2bd.js"><link rel="prefetch" href="/assets/index.html.7fc08718.js"><link rel="prefetch" href="/assets/digital-io-esp.html.c2a1406b.js"><link rel="prefetch" href="/assets/led-controller-esp32.html.540ae6bd.js"><link rel="prefetch" href="/assets/security-monitor-esp32.html.6eb5f56c.js"><link rel="prefetch" href="/assets/smoke-detector-esp32.html.698ee4b8.js"><link rel="prefetch" href="/assets/state-controller-esp32.html.2b6581fc.js"><link rel="prefetch" href="/assets/state-io-esp32.html.45cfb0f2.js"><link rel="prefetch" href="/assets/state-monitor-esp32.html.5a0fb04e.js"><link rel="prefetch" href="/assets/touch-panel-esp32.html.0acb9bce.js"><link rel="prefetch" href="/assets/index.html.0585389a.js"><link rel="prefetch" href="/assets/index.html.d2444dcf.js"><link rel="prefetch" href="/assets/esp-sensor-library.html.0ef63413.js"><link rel="prefetch" href="/assets/esp32-io-handler-library.html.a37143b0.js"><link rel="prefetch" href="/assets/esp32-lcd-library.html.9a775cb0.js"><link rel="prefetch" href="/assets/esp32-mqtt-library.html.9082a4d4.js"><link rel="prefetch" href="/assets/index.html.70ec63c3.js"><link rel="prefetch" href="/assets/backup-restore.html.888f1122.js"><link rel="prefetch" href="/assets/home_assistant.html.6c1526ac.js"><link rel="prefetch" href="/assets/node_red.html.626d5285.js"><link rel="prefetch" href="/assets/index.html.769252b2.js"><link rel="prefetch" href="/assets/IDC.html.7c963ae1.js"><link rel="prefetch" href="/assets/IO-ethernet.html.ab6c94cc.js"><link rel="prefetch" href="/assets/index.html.2ff5be75.js"><link rel="prefetch" href="/assets/versioning.html.59c0e5b3.js"><link rel="prefetch" href="/assets/index.html.97c170a6.js"><link rel="prefetch" href="/assets/index.html.e25d62d1.js"><link rel="prefetch" href="/assets/markdown.html.7dcba304.js"><link rel="prefetch" href="/assets/index.html.488b2264.js"><link rel="prefetch" href="/assets/rack-mount.html.2914fc32.js"><link rel="prefetch" href="/assets/oxrs-black.html.ecba864f.js"><link rel="prefetch" href="/assets/rack-fan-controller.html.d5a28230.js"><link rel="prefetch" href="/assets/rack32.html.e49e1b44.js"><link rel="prefetch" href="/assets/room8266.html.abe21645.js"><link rel="prefetch" href="/assets/tower-controller.html.3b9d260d.js"><link rel="prefetch" href="/assets/I2CRJ45.html.0ec5255e.js"><link rel="prefetch" href="/assets/Modular-I2CRJ45.html.85dbda09.js"><link rel="prefetch" href="/assets/Modular-Security-I2CRJ45.html.0aa3ceb1.js"><link rel="prefetch" href="/assets/hardware-template.html.a3de1a7e.js"><link rel="prefetch" href="/assets/hardware-template.html.052809d8.js"><link rel="prefetch" href="/assets/pwm-controllers.html.ef19550d.js"><link rel="prefetch" href="/assets/rack32-knx-shield.html.2c4bdee1.js"><link rel="prefetch" href="/assets/index.html.75f8c3c0.js"><link rel="prefetch" href="/assets/firmware-template.html.79b3c610.js"><link rel="prefetch" href="/assets/hardware-template.html.c2f922db.js"><link rel="prefetch" href="/assets/404.html.7d858b3d.js"><link rel="prefetch" href="/assets/index.html.315acd76.js"><link rel="prefetch" href="/assets/acronyms.html.b98710e3.js"><link rel="prefetch" href="/assets/makers.html.1aa0a8fa.js"><link rel="prefetch" href="/assets/skus.html.7998fda3.js"><link rel="prefetch" href="/assets/asset-generator.html.d226fcd7.js"><link rel="prefetch" href="/assets/index.html.b4a6f1f3.js"><link rel="prefetch" href="/assets/128x32-OLED-display.html.28a4bdae.js"><link rel="prefetch" href="/assets/IPS-display.html.8340b35d.js"><link rel="prefetch" href="/assets/index.html.25bae91a.js"><link rel="prefetch" href="/assets/index.html.d6424876.js"><link rel="prefetch" href="/assets/template.html.889f39eb.js"><link rel="prefetch" href="/assets/index.html.0fe217f7.js"><link rel="prefetch" href="/assets/template.html.ea0a699d.js"><link rel="prefetch" href="/assets/index.html.75e3df58.js"><link rel="prefetch" href="/assets/ac-smart-switch.html.ad1b3f97.js"><link rel="prefetch" href="/assets/index.html.4d299976.js"><link rel="prefetch" href="/assets/wt32-sc01.html.baf8cbc2.js"><link rel="prefetch" href="/assets/index.html.6b6d18a9.js"><link rel="prefetch" href="/assets/index.html.59afa53a.js"><link rel="prefetch" href="/assets/digital-io-esp.html.68e56509.js"><link rel="prefetch" href="/assets/led-controller-esp32.html.b2cb371b.js"><link rel="prefetch" href="/assets/security-monitor-esp32.html.143b253f.js"><link rel="prefetch" href="/assets/smoke-detector-esp32.html.20df28f7.js"><link rel="prefetch" href="/assets/state-controller-esp32.html.571e8c33.js"><link rel="prefetch" href="/assets/state-io-esp32.html.43ffcd28.js"><link rel="prefetch" href="/assets/state-monitor-esp32.html.54bc0658.js"><link rel="prefetch" href="/assets/touch-panel-esp32.html.4ce92ffe.js"><link rel="prefetch" href="/assets/index.html.b961859e.js"><link rel="prefetch" href="/assets/index.html.ef2fb9b6.js"><link rel="prefetch" href="/assets/esp-sensor-library.html.84a129b9.js"><link rel="prefetch" href="/assets/esp32-io-handler-library.html.1278acd1.js"><link rel="prefetch" href="/assets/esp32-lcd-library.html.d70871bd.js"><link rel="prefetch" href="/assets/esp32-mqtt-library.html.4b119def.js"><link rel="prefetch" href="/assets/index.html.14a60971.js"><link rel="prefetch" href="/assets/backup-restore.html.7668619d.js"><link rel="prefetch" href="/assets/home_assistant.html.09660d19.js"><link rel="prefetch" href="/assets/node_red.html.c2b078dc.js"><link rel="prefetch" href="/assets/index.html.fd712b2f.js"><link rel="prefetch" href="/assets/IDC.html.93bfd54e.js"><link rel="prefetch" href="/assets/IO-ethernet.html.6d774f3c.js"><link rel="prefetch" href="/assets/index.html.36193cbd.js"><link rel="prefetch" href="/assets/versioning.html.a346763f.js"><link rel="prefetch" href="/assets/index.html.89b14fa8.js"><link rel="prefetch" href="/assets/index.html.f4a0d41d.js"><link rel="prefetch" href="/assets/markdown.html.de272c81.js"><link rel="prefetch" href="/assets/index.html.1413ab0a.js"><link rel="prefetch" href="/assets/rack-mount.html.66f793f1.js"><link rel="prefetch" href="/assets/oxrs-black.html.18cd8f74.js"><link rel="prefetch" href="/assets/rack-fan-controller.html.45c66a1a.js"><link rel="prefetch" href="/assets/rack32.html.0b4cfa7e.js"><link rel="prefetch" href="/assets/room8266.html.6b64a260.js"><link rel="prefetch" href="/assets/tower-controller.html.547e3193.js"><link rel="prefetch" href="/assets/I2CRJ45.html.096a1cdd.js"><link rel="prefetch" href="/assets/Modular-I2CRJ45.html.46c06179.js"><link rel="prefetch" href="/assets/Modular-Security-I2CRJ45.html.6dbc221a.js"><link rel="prefetch" href="/assets/hardware-template.html.5d1808ff.js"><link rel="prefetch" href="/assets/hardware-template.html.86eb6ef6.js"><link rel="prefetch" href="/assets/pwm-controllers.html.2fee1ee7.js"><link rel="prefetch" href="/assets/rack32-knx-shield.html.a4510b0a.js"><link rel="prefetch" href="/assets/index.html.fadc846a.js"><link rel="prefetch" href="/assets/firmware-template.html.533b3f65.js"><link rel="prefetch" href="/assets/hardware-template.html.0685215d.js"><link rel="prefetch" href="/assets/404.html.ccf28cb9.js"><link rel="prefetch" href="/assets/404.6d94a7db.js"><link rel="prefetch" href="/assets/Layout.9e0edc14.js"><link rel="prefetch" href="/assets/IconGenerator.145f7b36.js"><link rel="prefetch" href="/assets/IndexCalculator.9c49a980.js">
    <link rel="stylesheet" href="/assets/style.fe1f59ee.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/hero.png" alt="OXRS Docs"><span class="site-name can-hide">OXRS Docs</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Docs"><span class="title">Docs</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Docs"><span class="title">Docs</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/hardware/" class="" aria-label="Hardware"><!--[--><!--]--> Hardware <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/firmware/" class="" aria-label="Firmware"><!--[--><!--]--> Firmware <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/libraries/" class="router-link-active" aria-label="Libraries"><!--[--><!--]--> Libraries <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/cases/" class="" aria-label="Cases"><!--[--><!--]--> Cases <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Add-ons"><span class="title">Add-ons</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Add-ons"><span class="title">Add-ons</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/add-ons/accessibility/" class="" aria-label="Accessibility"><!--[--><!--]--> Accessibility <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/add-ons/displays/" class="" aria-label="Displays"><!--[--><!--]--> Displays <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/add-ons/touch-displays/" class="" aria-label="Touch Displays"><!--[--><!--]--> Touch Displays <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/add-ons/switches/" class="" aria-label="Switches"><!--[--><!--]--> Switches <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Guides"><span class="title">Guides</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Guides"><span class="title">Guides</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guides/getting-started/" class="" aria-label="Getting Started"><!--[--><!--]--> Getting Started <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guides/advanced/" class="" aria-label="Advanced"><!--[--><!--]--> Advanced <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guides/standards/" class="" aria-label="Standards"><!--[--><!--]--> Standards <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guides/writing-docs/" class="" aria-label="Writing Docs"><!--[--><!--]--> Writing Docs <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Glossary"><span class="title">Glossary</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Glossary"><span class="title">Glossary</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/glossary/skus/" class="" aria-label="SKU&#39;s"><!--[--><!--]--> SKU&#39;s <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/glossary/makers/" class="" aria-label="Makers"><!--[--><!--]--> Makers <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/glossary/acronyms/" class="" aria-label="Acronyms"><!--[--><!--]--> Acronyms <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/OXRS-IO/" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://discord.gg/6pZvmVS5ET" rel="noopener noreferrer" target="_blank" aria-label="Discord"><!--[--><!--]--> Discord <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Docs"><span class="title">Docs</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Docs"><span class="title">Docs</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/hardware/" class="" aria-label="Hardware"><!--[--><!--]--> Hardware <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/firmware/" class="" aria-label="Firmware"><!--[--><!--]--> Firmware <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/libraries/" class="router-link-active" aria-label="Libraries"><!--[--><!--]--> Libraries <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/cases/" class="" aria-label="Cases"><!--[--><!--]--> Cases <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Add-ons"><span class="title">Add-ons</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Add-ons"><span class="title">Add-ons</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/add-ons/accessibility/" class="" aria-label="Accessibility"><!--[--><!--]--> Accessibility <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/add-ons/displays/" class="" aria-label="Displays"><!--[--><!--]--> Displays <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/add-ons/touch-displays/" class="" aria-label="Touch Displays"><!--[--><!--]--> Touch Displays <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/add-ons/switches/" class="" aria-label="Switches"><!--[--><!--]--> Switches <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Guides"><span class="title">Guides</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Guides"><span class="title">Guides</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guides/getting-started/" class="" aria-label="Getting Started"><!--[--><!--]--> Getting Started <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guides/advanced/" class="" aria-label="Advanced"><!--[--><!--]--> Advanced <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guides/standards/" class="" aria-label="Standards"><!--[--><!--]--> Standards <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guides/writing-docs/" class="" aria-label="Writing Docs"><!--[--><!--]--> Writing Docs <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Glossary"><span class="title">Glossary</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Glossary"><span class="title">Glossary</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/glossary/skus/" class="" aria-label="SKU&#39;s"><!--[--><!--]--> SKU&#39;s <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/glossary/makers/" class="" aria-label="Makers"><!--[--><!--]--> Makers <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/glossary/acronyms/" class="" aria-label="Acronyms"><!--[--><!--]--> Acronyms <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/OXRS-IO/" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://discord.gg/6pZvmVS5ET" rel="noopener noreferrer" target="_blank" aria-label="Discord"><!--[--><!--]--> Discord <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/docs/hardware/" class="sidebar-item sidebar-heading" aria-label="Hardware"><!--[--><!--]--> Hardware <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item">Controllers <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/hardware/controllers/rack32.html" class="sidebar-item" aria-label="Rack32"><!--[--><!--]--> Rack32 <!--[--><!--]--></a><!----></li><li><a href="/docs/hardware/controllers/room8266.html" class="sidebar-item" aria-label="Room8266"><!--[--><!--]--> Room8266 <!--[--><!--]--></a><!----></li><li><a href="/docs/hardware/controllers/oxrs-black.html" class="sidebar-item" aria-label="OXRS Black"><!--[--><!--]--> OXRS Black <!--[--><!--]--></a><!----></li><li><a href="/docs/hardware/controllers/rack-fan-controller.html" class="sidebar-item" aria-label="Modular Rack Fan Controller"><!--[--><!--]--> Modular Rack Fan Controller <!--[--><!--]--></a><!----></li><li><a href="/docs/hardware/controllers/tower-controller.html" class="sidebar-item" aria-label="Tower Controller"><!--[--><!--]--> Tower Controller <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">Input Devices <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/hardware/input-devices/I2CRJ45.html" class="sidebar-item" aria-label="I2CRJ45"><!--[--><!--]--> I2CRJ45 <!--[--><!--]--></a><!----></li><li><a href="/docs/hardware/input-devices/Modular-I2CRJ45.html" class="sidebar-item" aria-label="Modular-I2CRJ45"><!--[--><!--]--> Modular-I2CRJ45 <!--[--><!--]--></a><!----></li><li><a href="/docs/hardware/input-devices/Modular-Security-I2CRJ45.html" class="sidebar-item" aria-label="Modular-Security-I2CRJ45"><!--[--><!--]--> Modular-Security-I2CRJ45 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">Output Devices <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/hardware/output-devices/pwm-controllers.html" class="sidebar-item" aria-label="PWM Controllers"><!--[--><!--]--> PWM Controllers <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">Input &amp; Output Devices <!----></p><!----></li><li><p tabindex="0" class="sidebar-item">Shields <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/hardware/shields/rack32-knx-shield.html" class="sidebar-item" aria-label="Rack32 KNX Shield"><!--[--><!--]--> Rack32 KNX Shield <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/docs/firmware/" class="sidebar-item sidebar-heading" aria-label="Firmware"><!--[--><!--]--> Firmware <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item">ESP32 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/firmware/state-monitor-esp32.html" class="sidebar-item" aria-label="State Monitor ESP32"><!--[--><!--]--> State Monitor ESP32 <!--[--><!--]--></a><!----></li><li><a href="/docs/firmware/state-controller-esp32.html" class="sidebar-item" aria-label="State Controller ESP32"><!--[--><!--]--> State Controller ESP32 <!--[--><!--]--></a><!----></li><li><a href="/docs/firmware/state-io-esp32.html" class="sidebar-item" aria-label="State IO ESP32"><!--[--><!--]--> State IO ESP32 <!--[--><!--]--></a><!----></li><li><a href="/docs/firmware/digital-io-esp.html" class="sidebar-item" aria-label="Digital IO ESP32/ESP8266"><!--[--><!--]--> Digital IO ESP32/ESP8266 <!--[--><!--]--></a><!----></li><li><a href="/docs/firmware/security-monitor-esp32.html" class="sidebar-item" aria-label="Security Monitor ESP32"><!--[--><!--]--> Security Monitor ESP32 <!--[--><!--]--></a><!----></li><li><a href="/docs/firmware/smoke-detector-esp32.html" class="sidebar-item" aria-label="Smoke Detector ESP32"><!--[--><!--]--> Smoke Detector ESP32 <!--[--><!--]--></a><!----></li><li><a href="/docs/firmware/touch-panel-esp32.html" class="sidebar-item" aria-label="Touch Panel ESP32"><!--[--><!--]--> Touch Panel ESP32 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/docs/libraries/" class="router-link-active sidebar-item sidebar-heading active" aria-label="Libraries"><!--[--><!--]--> Libraries <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item active">ESP32 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/libraries/esp32-mqtt-library.html" class="sidebar-item" aria-label="ESP32 MQTT library"><!--[--><!--]--> ESP32 MQTT library <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/docs/libraries/esp32-api-library.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="ESP32 API library"><!--[--><!--]--> ESP32 API library <!--[--><!--]--></a><!----></li><li><a href="/docs/libraries/esp32-lcd-library.html" class="sidebar-item" aria-label="ESP32 LCD library"><!--[--><!--]--> ESP32 LCD library <!--[--><!--]--></a><!----></li><li><a href="/docs/libraries/esp32-io-handler-library.html" class="sidebar-item" aria-label="ESP32 I/O handler library"><!--[--><!--]--> ESP32 I/O handler library <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">ESP <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/libraries/esp-sensor-library.html" class="sidebar-item" aria-label="ESP SENSOR library"><!--[--><!--]--> ESP SENSOR library <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/docs/cases/" class="sidebar-item sidebar-heading" aria-label="Cases"><!--[--><!--]--> Cases <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item">Rack Mount <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/cases/rack-mount/rack-mount.html" class="sidebar-item" aria-label="Rack Mount Cases"><!--[--><!--]--> Rack Mount Cases <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">3D Printed <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/docs/cases/3D-printed/" class="sidebar-item" aria-label="3D Printed Cases"><!--[--><!--]--> 3D Printed Cases <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="esp32-api-library" tabindex="-1"><a class="header-anchor" href="#esp32-api-library" aria-hidden="true">#</a> ESP32 API library</h1><p class="maker">by <b>OXRS Core Team</b></p><blockquote><p>SKU: OXRS-IO-API-ESP32-LIB</p></blockquote><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2><p>This library adds a REST API to OXRS compatible devices, providing a means to bootstrap MQTT configuration, retrieve adoption details, send configuration and commands, and perform over-the-air (OTA) updates.</p><p>Using this library allows you to release pre-compiled versions of your firmware. Users don&#39;t need to manually type in their MQTT broker details, compile the library, and then flash their devices. It can all be done via the OXRS API making releasing and distributing the firmware much easier.</p><hr><h3 id="how-does-it-work" tabindex="-1"><a class="header-anchor" href="#how-does-it-work" aria-hidden="true">#</a> How does it work?</h3><p>This library uses the Arduino <a href="https://github.com/lasselukkari/aWOT" target="_blank" rel="noopener noreferrer">aWOT<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> library by Lasse Lukkari. It also makes use of the SPIFFS file system, if available, for persisting configuration and restoring on startup.</p><p>The library will expose the following REST API endpoints on the device;</p><table><thead><tr><th style="text-align:left;">REST API</th><th style="text-align:left;">Supports</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>/api/adopt</code></td><td style="text-align:left;">GET</td><td style="text-align:left;">Gets firmware and network details and configuration/command schemas, in JSON format</td></tr><tr><td style="text-align:left;"><code>/api/restart</code></td><td style="text-align:left;">POST</td><td style="text-align:left;">Force a soft-reset</td></tr><tr><td style="text-align:left;"><code>/api/resetWifi</code></td><td style="text-align:left;">POST</td><td style="text-align:left;">Erase WiFi credentials and force a soft-reset</td></tr><tr><td style="text-align:left;"><code>/api/resetConfig</code></td><td style="text-align:left;">POST</td><td style="text-align:left;">Format SPIFFS and force a soft-reset</td></tr><tr><td style="text-align:left;"><code>/api/factoryReset</code></td><td style="text-align:left;">POST</td><td style="text-align:left;">Erase WiFi credentials and format SPIFFS, then force a soft-reset</td></tr><tr><td style="text-align:left;"><code>/api/mqtt</code></td><td style="text-align:left;">GET &amp; POST</td><td style="text-align:left;">Get or set MQTT configuration, in JSON format, and persist to SPIFFS</td></tr><tr><td style="text-align:left;"><code>/api/config</code></td><td style="text-align:left;">GET &amp; POST</td><td style="text-align:left;">Get or set device configuration, in JSON format based on the <code>configSchema</code> in the adoption payload, and persist to SPIFFS</td></tr><tr><td style="text-align:left;"><code>/api/command</code></td><td style="text-align:left;">POST</td><td style="text-align:left;">Send device commands, in JSON format based on the <code>commandSchema</code> in the adoption payload</td></tr><tr><td style="text-align:left;"><code>/api/ota</code></td><td style="text-align:left;">POST</td><td style="text-align:left;">Update device firmware with a new binary provided in the request body</td></tr></tbody></table><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>There is no authentication on any of the REST API endpoints. <strong>DO NOT</strong> expose your device to the internet... <strong>EVER</strong>!!</p></div><h2 id="usage" tabindex="-1"><a class="header-anchor" href="#usage" aria-hidden="true">#</a> Usage</h2><p>The library needs to be initialised with an instance of <a href="/docs/libraries/esp32-mqtt-library.html" class=""><code>OXRS_MQTT</code></a>, since we need to initialise that with the MQTT configuration provisioned by the API on startup.</p><p>The API library will pass any device configuration, provisioned via the <code>/api/config</code> REST API, down to the MQTT library for handling, since that already has all the config callbacks used by the firmware. This ensures that all configuration is handled by your firmware in the same place, regardless of whether it was provisioned by the API, or received via MQTT on the <code>conf/&lt;clientid&gt;</code> topic.</p><p>The API library will pass any device commands, provisioned via the <code>/api/command</code> REST API, down to the MQTT library for handling, since that already has all the command callbacks used by the firmware. This ensures that all commands are handled by your firmware in the same place, regardless of whether it was sent via the API, or received via MQTT on the <code>cmnd/&lt;clientid&gt;</code> topic.</p><p>You can optionally provide the adoption details for the device by setting the <code>.onAdopt()</code> callback. This callback will be called any time the API or MQTT libraries are required to generate the adoption payload. The adoption payload is available via the <code>/api/adopt</code> REST API endpoint or published via MQTT to <code>stat/&lt;deviceid&gt;/adopt</code>, upon successful connection to your MQTT broker.</p><p>The following code is all you need to enable the OXRS REST API and HTML pages on your device;</p><div class="language-c ext-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">// MQTT client</span>
PubSubClient <span class="token function">_mqttClient</span><span class="token punctuation">(</span>_client<span class="token punctuation">)</span><span class="token punctuation">;</span>
OXRS_MQTT <span class="token function">_mqtt</span><span class="token punctuation">(</span>_mqttClient<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// REST API</span>
EthernetServer <span class="token function">_server</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
OXRS_API <span class="token function">_api</span><span class="token punctuation">(</span>_mqtt<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token comment">// Set up the REST API</span>
  _api<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token comment">// Handle any Ethernet REST API requests</span>
  EthernetClient client <span class="token operator">=</span> _server<span class="token punctuation">.</span><span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  _api<span class="token punctuation">.</span><span class="token function">checkEthernet</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>client<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>You can use this library with a WiFi connected device as well. Use <code>WifiServer</code>, <code>WiFiClient</code> and <code>_api.checkWifi()</code> in place of the Ethernet versions in the code snippet above.</p></div><h2 id="rest-api" tabindex="-1"><a class="header-anchor" href="#rest-api" aria-hidden="true">#</a> REST API</h2><p>Listed below are the REST API endpoints supported by this library, including example payloads.</p><h3 id="get-api-adopt" tabindex="-1"><a class="header-anchor" href="#get-api-adopt" aria-hidden="true">#</a> GET <code>/api/adopt</code></h3><p>Retrieves the adoption details for the device;</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;firmware&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OXRS-SHA-StateMonitor-ESP32-FW&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;shortName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;State Monitor&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;maker&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SuperHouse Automation&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.5.0&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;network&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;mode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ethernet&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;192.168.40.64&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;mac&quot;</span><span class="token operator">:</span> <span class="token string">&quot;94:B9:7E:F1:D2:5B&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;configSchema&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;$schema&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://json-schema.org/draft-07/schema#&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;State Monitor&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;inputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;array&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;items&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;integer&quot;</span><span class="token punctuation">,</span>
              <span class="token property">&quot;minimum&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
              <span class="token property">&quot;maximum&quot;</span><span class="token operator">:</span> <span class="token number">128</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;enum&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;contact&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;rotary&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;switch&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;toggle&quot;</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;invert&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boolean&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;required&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;index&quot;</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;temperatureUpdateMillis&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;integer&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;minimum&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;commandSchema&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;$schema&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://json-schema.org/draft-07/schema#&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;State Monitor&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;restart&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boolean&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="post-api-restart" tabindex="-1"><a class="header-anchor" href="#post-api-restart" aria-hidden="true">#</a> POST <code>/api/restart</code></h3><p>Empty payload. Soft-reset the device.</p><h3 id="post-api-resetwifi" tabindex="-1"><a class="header-anchor" href="#post-api-resetwifi" aria-hidden="true">#</a> POST <code>/api/resetWifi</code></h3><p>Empty payload. Erases any WiFi credentials and soft-reset the device.</p><h3 id="post-api-resetconfig" tabindex="-1"><a class="header-anchor" href="#post-api-resetconfig" aria-hidden="true">#</a> POST <code>/api/resetConfig</code></h3><p>Empty payload. Formats the SPIFFS (if present) and soft-reset the device.</p><h3 id="post-api-factoryreset" tabindex="-1"><a class="header-anchor" href="#post-api-factoryreset" aria-hidden="true">#</a> POST <code>/api/factoryReset</code></h3><p>Empty payload. Erases any WiFi credentials and formats the SPIFFS (if present) and soft-reset the device.</p><h3 id="get-api-mqtt" tabindex="-1"><a class="header-anchor" href="#get-api-mqtt" aria-hidden="true">#</a> GET <code>/api/mqtt</code></h3><p>Retrieves the current MQTT configuration, excluding any password (if set);</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;broker&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mqtt.home&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1883&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;clientId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f1d25b&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;oxrs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;topicPrefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;topicSuffix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;connected&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;topics&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;lwt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;stat/f1d25b/lwt&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;adopt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;stat/f1d25b/adopt&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token string">&quot;conf/f1d25b&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cmnd/f1d25b&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;stat/f1d25b&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;telemetry&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tele/f1d25b&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Also includes a <code>connected</code> flag which indicates if the device is connected to the MQTT broker. And the full set of topics this device is using, for convenience.</p><h3 id="post-api-mqtt" tabindex="-1"><a class="header-anchor" href="#post-api-mqtt" aria-hidden="true">#</a> POST <code>/api/mqtt</code></h3><p>Update the current MQTT configuration, and persist to SPIFFS so it can be restored on restart;</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;broker&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mqtt.home&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1883&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;clientId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f1d25b&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;oxrs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;secret&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;topicPrefix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;topicSuffix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The only mandatory field is <code>broker</code>, everything else is optional. The <code>clientId</code> will typically default to the last 3 bytes of the device MAC address, but this is configurable in your firmware code when initialising the <a href="/docs/libraries/esp32-mqtt-library.html" class=""><code>OXRS_MQTT</code></a> library.</p><h3 id="get-api-config" tabindex="-1"><a class="header-anchor" href="#get-api-config" aria-hidden="true">#</a> GET <code>/api/config</code></h3><p>Retrieves the current device config. Depends on the firmware (example below is from the <a href="/docs/firmware/state-monitor-esp32.html" class="">State Monitor</a> firmware);</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;temperatureUpdateMillis&quot;</span><span class="token operator">:</span> <span class="token number">60000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;inputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;toggle&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;switch&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;button&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;contact&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;invert&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="post-api-config" tabindex="-1"><a class="header-anchor" href="#post-api-config" aria-hidden="true">#</a> POST <code>/api/config</code></h3><p>Update the current device config, and persist to SPIFFS so it can be restored on restart. Depends on the firmware (example below is from the <a href="/docs/firmware/state-monitor-esp32.html" class="">State Monitor</a> firmware);</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;temperatureUpdateMillis&quot;</span><span class="token operator">:</span> <span class="token number">60000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;inputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;toggle&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;switch&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;button&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;contact&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;invert&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="post-api-command" tabindex="-1"><a class="header-anchor" href="#post-api-command" aria-hidden="true">#</a> POST <code>/api/command</code></h3><p>Send a command to the device. Depends on the firmware (example below is from the <a href="/docs/firmware/state-monitor-esp32.html" class="">State Monitor</a> firmware);</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;restart&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="post-api-ota" tabindex="-1"><a class="header-anchor" href="#post-api-ota" aria-hidden="true">#</a> POST <code>/api/ota</code></h3><p>Upload and reflash the device with the firmware binary sent in the request payload.</p><h2 id="downloads" tabindex="-1"><a class="header-anchor" href="#downloads" aria-hidden="true">#</a> Downloads</h2><p>Download the latest version of the library on <a href="https://github.com/OXRS-IO/OXRS-IO-API-ESP32-LIB" target="_blank" rel="noopener noreferrer">Github<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><p>A good place to look for an example of how to use this MQTT library is in the <a href="/docs/hardware/controllers/rack32.html" class="">Rack32</a> library found <a href="https://github.com/SuperHouse/OXRS-SHA-Rack32-ESP32-LIB" target="_blank" rel="noopener noreferrer">here<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h2 id="supported-hardware" tabindex="-1"><a class="header-anchor" href="#supported-hardware" aria-hidden="true">#</a> Supported Hardware</h2><p>This library is compatible with any ESP-based hardware, including ESP32 and ESP8266 microprocessors.</p><hr><h4 id="credits" tabindex="-1"><a class="header-anchor" href="#credits" aria-hidden="true">#</a> Credits</h4><ul><li><a href="https://oxrs.io/" target="_blank" rel="noopener noreferrer">OXRS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> Core Team</li></ul><hr><h4 id="license" tabindex="-1"><a class="header-anchor" href="#license" aria-hidden="true">#</a> License</h4><p>Found <a href="https://github.com/OXRS-IO/OXRS-IO-API-ESP32-LIB/blob/main/LICENSE" target="_blank" rel="noopener noreferrer">here<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/OXRS-IO/OXRS-IO-WEBSITE/edit/main/docs/docs/libraries/esp32-api-library.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: ben.jones12@gmail.com">ben</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: ben.jones12@gmail.com">Ben Jones</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: sumnerboy12@users.noreply.github.com">Ben Jones</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: support@bettercorp.co.za">Mitchell R</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/docs/libraries/esp32-mqtt-library.html" class="" aria-label="ESP32 MQTT library"><!--[--><!--]--> ESP32 MQTT library <!--[--><!--]--></a></span><span class="next"><a href="/docs/libraries/esp32-lcd-library.html" class="" aria-label="ESP32 LCD library"><!--[--><!--]--> ESP32 LCD library <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.f95394c5.js" defer></script>
  </body>
</html>
